/*! dicom-character-set - 1.0.5 - 2024-01-10 | (c) 2018 Radialogica, LLC | https://github.com/radialogica/dicom-character-set */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["dicom-character-set"]=n():e["dicom-character-set"]=n()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var e={d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{characterSets:()=>o,convertBytes:()=>R,convertBytesPromise:()=>w});const t={codeElement:"G0",escapeSequence:[27,40,66],encoding:"windows-1252",isASCII:!0,bytesPerCodePoint:1},o={"ISO_IR 6":{encoding:"utf-8"},"ISO_IR 100":{encoding:"windows-1252"},"ISO_IR 101":{encoding:"iso-8859-2"},"ISO_IR 109":{encoding:"iso-8859-3"},"ISO_IR 110":{encoding:"iso-8859-4"},"ISO_IR 144":{encoding:"iso-8859-5"},"ISO_IR 127":{encoding:"iso-8859-6"},"ISO_IR 126":{encoding:"iso-8859-7"},"ISO_IR 138":{encoding:"iso-8859-8"},"ISO_IR 148":{encoding:"windows-1254"},"ISO_IR 13":{encoding:"shift-jis"},"ISO_IR 166":{encoding:"tis-620"},"ISO 2022 IR 6":{extension:!0,elements:[t]},"ISO 2022 IR 100":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,65],encoding:"windows-1252",bytesPerCodePoint:1}]},"ISO 2022 IR 101":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,66],encoding:"iso-8859-2",bytesPerCodePoint:1}]},"ISO 2022 IR 109":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,67],encoding:"iso-8859-3",bytesPerCodePoint:1}]},"ISO 2022 IR 110":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,68],encoding:"iso-8859-4",bytesPerCodePoint:1}]},"ISO 2022 IR 144":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,76],encoding:"iso-8859-5",bytesPerCodePoint:1}]},"ISO 2022 IR 127":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,71],encoding:"iso-8859-6",bytesPerCodePoint:1}]},"ISO 2022 IR 126":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,70],encoding:"iso-8859-7",bytesPerCodePoint:1}]},"ISO 2022 IR 138":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,72],encoding:"iso-8859-8",bytesPerCodePoint:1}]},"ISO 2022 IR 148":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,77],encoding:"windows-1254",bytesPerCodePoint:1}]},"ISO 2022 IR 13":{extension:!0,elements:[{codeElement:"G0",escapeSequence:[27,40,74],encoding:"shift-jis",bytesPerCodePoint:1},{codeElement:"G1",escapeSequence:[27,41,73],encoding:"shift-jis",bytesPerCodePoint:1}]},"ISO 2022 IR 166":{extension:!0,elements:[t,{codeElement:"G1",escapeSequence:[27,45,84],encoding:"tis-620",bytesPerCodePoint:1}]},"ISO 2022 IR 87":{extension:!0,multiByte:!0,elements:[{codeElement:"G0",escapeSequence:[27,36,66],encoding:"euc-jp",setHighBit:!0,bytesPerCodePoint:2}]},"ISO 2022 IR 159":{extension:!0,multiByte:!0,elements:[{codeElement:"G0",escapeSequence:[27,36,40,68],encoding:"euc-jp",isJISX0212:!0,bytesPerCodePoint:2}]},"ISO 2022 IR 149":{extension:!0,multiByte:!0,elements:[{codeElement:"G1",escapeSequence:[27,36,41,67],encoding:"euc-kr",bytesPerCodePoint:2}]},"ISO 2022 IR 58":{extension:!0,multiByte:!0,elements:[{codeElement:"G1",escapeSequence:[27,36,41,65],encoding:"gb18030",bytesPerCodePoint:2}]},"ISO_IR 192":{encoding:"utf-8",multiByte:!0},GB18030:{encoding:"gb18030",multiByte:!0},GBK:{encoding:"gbk",multiByte:!0}},i=27,s=10,c=12,r=13,d=9,u=92,l=61,f=94;function I(e,n){const t=n.replace(/~/g,"‾");return e.includes(u)?t:t.replace(/\\/g,"¥")}function a(e,n,t,o,i,s){const c=h(n,o,i,s);return e+g(n.encoding,t,c)}function S(e,n,t,o,i,s){const c=h(n,o,i,s);return(""===e?Promise.resolve(""):e).then((e=>p(n.encoding,t,c).then((n=>e+n))))}function m(e,n,t,i,I){!function(e,n){if(n&&!(n instanceof Uint8Array))throw new Error("bytes must be a Uint8Array");if(e&&"string"!=typeof e)throw new Error("specificCharacterSet must be a string")}(t,i);const a=function(e){let n=e?e.split("\\").map((e=>e.trim().toUpperCase())):[""];""===n[0]&&(n[0]=n.length>1?"ISO 2022 IR 6":"ISO_IR 6");if(n.some((e=>void 0===o[e])))throw new Error("Invalid specific character set specified.");return n=function(e){const n=o[e[0]];if(n.multiByte&&!n.extension)return[e[0]];return e.filter((e=>!o[e].multiByte||o[e].extension))}(n),function(e){const n=e.length>1,t=[];for(let o=0;o<e.length;o++){const i=e[o];t.includes(i)||t.push(n?i.replace("ISO_IR","ISO 2022 IR"):i)}return t}(n)}(t),S=function(e){const n=(e||"").trim().toUpperCase(),t=[s,c,r,d];["UT","ST","LT"].includes(n)||t.push(u);"PN"===n&&(t.push(l),t.push(f));return t}((I||{}).vr);return 1!==a.length||a[0].startsWith("ISO 2022")?function(e,n,t,o){let i="";if(!n||0===n.length)return i;const s={G0:e[0].elements.find((e=>"G0"===e.codeElement)),G1:e[0].elements.find((e=>"G1"===e.codeElement))},c=Object.assign({},s);let r,d=0,u=0;for(;u<n.length;){r||(r=P(n[d],c));const l=y(n,d,r,c,s,t);if(u=l.index,u>d&&(i=o(i,r,t,n,d,u)),d=u,r=l.characterSet,l.escapeSequence){const t=O(n,u,e);c[t.codeElement]=t,d+=t.escapeSequence.length}}return i}(a.map((e=>o[e])),i,S,n):e(o[a[0]].encoding,S,i)}function g(e,n,t){const o=new TextDecoder(e).decode(t);return"shift-jis"===e?I(n,o):o}function p(e,n,t){return new Promise((o=>{const i=new FileReader;i.onload="shift-jis"===e?()=>o(I(n,i.result)):()=>o(i.result);const s=new Blob([t]);i.readAsText(s,e)}))}function y(e,n,t,o,s,c){for(let r=n;r<e.length;r+=t.bytesPerCodePoint){if(e[r]===i)return{escapeSequence:!0,index:r};1===t.bytesPerCodePoint&&c.includes(e[r])&&Object.assign(o,s);const n=P(e[r],o);if(t&&n!==t)return{characterSet:n,index:r}}return{index:e.length}}function P(e,n){return e>127&&n.G1?n.G1:n.G0?n.G0:n.G1&&1===n.G1.bytesPerCodePoint?n.G1:o["ISO 2022 IR 6"].elements[0]}function h(e,n,t,o){let i;return e.isJISX0212?i=function(e,n,t){const o=t-n;if(o%2!=0)throw new Error("JIS X string with a character not having exactly two bytes!");const i=new Uint8Array(o+o/2);let s=0;for(let o=n;o<t;o+=2)i[s++]=143,i[s++]=128|e[o],i[s++]=128|e[o+1];return i}(n,t,o):(i=new Uint8Array(o-t),i.set(new Uint8Array(n.buffer,n.byteOffset+t,o-t)),e.setHighBit&&function(e){for(let n=0;n<e.length;n++)e[n]|=128}(i)),i}function b(e,n,t){for(let o=0;o<e.length;o++){if(t+o>=n.length)return!1;if(n[t+o]!==e[o])return!1}return!0}function O(e,n,t){for(let o=0;o<t.length;o++){const i=t[o];for(let t=0;t<i.elements.length;t++){const o=i.elements[t];if(b(o.escapeSequence,e,n))return o}}throw new Error(`Unknown escape sequence encountered at byte ${n}`)}function R(e,n,t){return m(g,a,e,n,t)}function w(e,n,t){return m(p,S,e,n,t)}return n})()));
//# sourceMappingURL=dicom-character-set.min.js.map